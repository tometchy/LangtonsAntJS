<!doctype html>

<body>

    <canvas id='map'>Map</canvas>

    <script>
        antRectLengthInPixels = 5;
        numberOfPossibleAntsInRow = 200;
        var canvasRectLengthInPixels = numberOfPossibleAntsInRow * antRectLengthInPixels;

        mapCanvas = document.getElementById("map").getContext('2d');
        mapCanvas.canvas.width = canvasRectLengthInPixels;
        mapCanvas.canvas.height = canvasRectLengthInPixels;

        var borderRectLength = 10;
        mapCanvas.fillRect(0, 0, borderRectLength, borderRectLength);
        mapCanvas.fillRect(canvasRectLengthInPixels - borderRectLength, canvasRectLengthInPixels - borderRectLength, borderRectLength, borderRectLength);
        mapCanvas.fillRect(0, canvasRectLengthInPixels - borderRectLength, borderRectLength, borderRectLength);
        mapCanvas.fillRect(canvasRectLengthInPixels - borderRectLength, 0, borderRectLength, borderRectLength);

        world = Array.apply(null, new Array(numberOfPossibleAntsInRow)).map(Number.prototype.valueOf, 0);
        for (let i = 0; i < numberOfPossibleAntsInRow; i++) {
            world[i] = Array.apply(null, new Array(numberOfPossibleAntsInRow)).map(Number.prototype.valueOf, 0);
        }

        var ants = [];

        function moveAnt(i) {
            if ((++world[ants[i].x][ants[i].y]) === 1) {
                ants[i].direction--;
                mapCanvas.fillStyle = ants[i].color;
                mapCanvas.fillRect(ants[i].x * antRectLengthInPixels, ants[i].y * antRectLengthInPixels, antRectLengthInPixels, antRectLengthInPixels);
            } else {
                ants[i].direction++;
                world[ants[i].x][ants[i].y] = 0;
                mapCanvas.clearRect(ants[i].x * antRectLengthInPixels, ants[i].y * antRectLengthInPixels, antRectLengthInPixels, antRectLengthInPixels);
            }

            if (ants[i].direction === -1) {
                ants[i].direction = 3;
            }

            if (ants[i].direction === 4) {
                ants[i].direction = 0;
            }

            if (ants[i].direction === 0) {
                ants[i].x++;
            } else if (ants[i].direction === 1) {
                ants[i].y++;
            } else if (ants[i].direction === 2) {
                ants[i].x--;
            } else if (ants[i].direction === 3) {
                ants[i].y--;
            }

            if (ants[i].x === -1) {
                ants[i].direction = 3;
                ants[i].x = 0;
            } else if (ants[i].y === -1) {
                ants[i].direction = 0;
                ants[i].y = 0;
            } else if (ants[i].x === numberOfPossibleAntsInRow) {
                ants[i].x = numberOfPossibleAntsInRow - 1;
                ants[i].direction = 1;
            } else if (ants[i].y === numberOfPossibleAntsInRow) {
                ants[i].y = numberOfPossibleAntsInRow - 1;
                ants[i].direction = 2;
            }
        };

        function addAnt(ant) {
            ants.push(ant);
            var antIndex = ants.length - 1;
        }

        function startAnts() {
            setInterval(function () {
                for (var i = 0; i < ants.length; i++)
                    moveAnt(i);
            }, 10 /*milliseconds*/); // Note: 10 milliseconds is the smalles possible interval
        }

        addAnt({ x: 50, y: 50, direction: 0, color: "rgb(255, 0, 255)" });
        addAnt({ x: 150, y: 150, direction: 1, color: "black" });
        addAnt({ x: 150, y: 50, direction: 2, color: "green" });
        addAnt({ x: 50, y: 150, direction: 3, color: "blue" });
        addAnt({ x: 100, y: 100, direction: 0, color: "yellow" })
        addAnt({ x: 10, y: 10, direction: 0, color: "#FF0000" })

        startAnts();
    </script>
</body>

</html>