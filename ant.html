<!doctype html>

<body>

    <canvas id='map'>Map</canvas>

    <script>
        function prepareCanvas(canvasRectLengthInPixels) {
            mapCanvas = document.getElementById("map").getContext('2d');
            mapCanvas.canvas.width = canvasRectLengthInPixels;
            mapCanvas.canvas.height = canvasRectLengthInPixels;

            var borderRectLenth = 10;
            mapCanvas.fillRect(0, 0, borderRectLenth, borderRectLenth);
            mapCanvas.fillRect(canvasRectLengthInPixels - borderRectLenth, canvasRectLengthInPixels - borderRectLenth, borderRectLenth, borderRectLenth);
            mapCanvas.fillRect(0, canvasRectLengthInPixels - borderRectLenth, borderRectLenth, borderRectLenth);
            mapCanvas.fillRect(canvasRectLengthInPixels - borderRectLenth, 0, borderRectLenth, borderRectLenth);
        }

        prepareCanvas(1000);

        D = 200;
        d = 5;

        array = Array.apply(null, new Array(D)).map(Number.prototype.valueOf, 0);
        for (let i = 0; i < D; i++) {
            array[i] = Array.apply(null, new Array(D)).map(Number.prototype.valueOf, 0);
        }

        var ants = [
            {
                x: 50,
                y: 50,
                direction: 0,
                color: "#FF00FF"
            },
            {
                x: 150,
                y: 150,
                direction: 1,
                color: "#0000FF"
            },
            {
                x: 150,
                y: 50,
                direction: 2,
                color: "#00FF00"
            },
            {
                x: 50,
                y: 150,
                direction: 3,
                color: "#00FFFF"
            },
            {
                x: 100,
                y: 100,
                direction: 0,
                color: "#FFFF00"
            }
        ];

        function moveAnt(index) {
            if ((++array[ants[index].x][ants[index].y]) === 1) {
                ants[index].direction--;
                mapCanvas.fillStyle = ants[index].color;
                mapCanvas.fillRect(ants[index].x * d, ants[index].y * d, d, d);
            } else {
                ants[index].direction++;
                array[ants[index].x][ants[index].y] = 0;
                mapCanvas.clearRect(ants[index].x * d, ants[index].y * d, d, d);
            }

            if (ants[index].direction === -1) {
                ants[index].direction = 3;
            }

            if (ants[index].direction === 4) {
                ants[index].direction = 0;
            }

            if (ants[index].direction === 0) {
                ants[index].x++;
            } else if (ants[index].direction === 1) {
                ants[index].y++;
            } else if (ants[index].direction === 2) {
                ants[index].x--;
            } else if (ants[index].direction === 3) {
                ants[index].y--;
            }

            if (ants[index].x === -1) {
                ants[index].direction = 3;
                ants[index].x = 0;
            } else if (ants[index].y === -1) {
                ants[index].direction = 0;
                ants[index].y = 0;
            } else if (ants[index].x === D) {
                ants[index].x = D - 1;
                ants[index].direction = 1;
            } else if (ants[index].y === D) {
                ants[index].y = D - 1;
                ants[index].direction = 2;
            }
        };

        setInterval(function () { moveAnt(0) }, 10 /*milliseconds*/); // Note: 10 milliseconds is the smalles possible interval
        setInterval(function () { moveAnt(1) }, 10 /*milliseconds*/); // Note: 10 milliseconds is the smalles possible interval
        setInterval(function () { moveAnt(2) }, 10 /*milliseconds*/); // Note: 10 milliseconds is the smalles possible interval
        setInterval(function () { moveAnt(3) }, 10 /*milliseconds*/); // Note: 10 milliseconds is the smalles possible interval
        setInterval(function () { moveAnt(4) }, 10 /*milliseconds*/); // Note: 10 milliseconds is the smalles possible interval
    </script>
</body>

</html>